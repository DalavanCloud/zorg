{% import "utils.html" as utils %}

{% set ts = request.get_testsuite() %}
{% set machine = ts.getMachine(id) %}

{% extends "layout.html" %}{
% set components = [(testsuite_name, v4_url_for("v4_overview"))] %}
{% block head %}
        <script src="{{ url_for('.static', filename='popup.js') }}"></script>
{% endblock %}
{% block title %}Machine: {{machine.name}}:{{machine.id}}{% endblock %}
{% block body %}

<table width="100%%" border=1>
  <tr>
    <td valign="top" width="200">
      <a href="../..">Homepage</a>
      <h4>Relatives:</h4>
      <ul>

{# List all machines with this name. #}
{% for m in ts.machines(name=machine.name) %}
        <li><a href="{{ v4_url_for('v4_machine', id=m.id)}}">{{
            m.name}}:{{m.id}}</a></li>
{% endfor %}
      </ul>
    </td>
    <td valign="top">
      <table border=1>
      <tr>
        <td> <b>Nickname</b> </td>
        <td> {{machine.name}} </td>
      </tr>
      <tr>
        <td> <b>Machine ID</b> </td>
        <td> {{machine.id}} </td>
      </tr>
      </table>


{{ utils.render_popup_begin('machine_info', 'Machine Info', true, 1) }}
      <h4>Fields</h4>
      <table border=1>
{% for item in ts.machine_fields %}
      <tr>
        <td> <b>{{item.name}}</b> </td>
        <td>{{machine.get_field(item)}}</td>
      </tr>
{% endfor %}
      </table>
      <h4>Parameters</h4>
      <table border=1>
{% for key,value in machine.get_parameters() %}
      <tr>
        <td> <b>{{key}}</b> </td>
        <td>{{value}}</td>
      </tr>
{% endfor %}
      </table>
{{ utils.render_popup_end() }}

<p>
<table class="sortable" border=1>
<thead>
  <tr>
    <th>Run Order</th>
    <th>Start Time</th>
    <th>End Time</th>
    <th>&nbsp;</th>
  </tr>
</thead>
{% for order,runs in associated_runs|sort|reverse %}
{% for run in runs %}
  <tr>
{% if loop.first %}
    <td rowspan="{{ runs|length }}" align=right>{{order}}</td>
{% endif %}
    <td>{{ run.start_time }}</td>
    <td>{{ run.end_time }}s</td>
    <td><a href="{{v4_url_for('v4_run', id=run.id)}}">
        View Results</a></td>
  </tr>
{% endfor %}
{% endfor %}
</table>


    </td>
  </tr>
</table>

{% endblock %}
